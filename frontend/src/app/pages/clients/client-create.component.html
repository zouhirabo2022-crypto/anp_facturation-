<div class="container-fluid mt-4">
    <div class="row justify-content-center">
        <div class="col-lg-8">
            <div class="card shadow-sm border-0">
                <div class="card-header bg-white py-3 border-0">
                    <div class="d-flex justify-content-between align-items-center">
                        <h4 class="mb-0 text-primary">
                            <i class="fas" [ngClass]="isEditMode ? 'fa-user-edit' : 'fa-user-plus'"></i>
                            {{ isEditMode ? 'Modifier le Client' : 'Nouveau Client' }}
                        </h4>
                        <button class="btn btn-outline-secondary btn-sm" (click)="cancel()">
                            <i class="fas fa-times"></i>
                        </button>
                    </div>
                </div>
                
                <div class="card-body">
                    <div *ngIf="errorMessage" class="alert alert-danger mb-4">
                        <i class="fas fa-exclamation-circle me-2"></i>{{ errorMessage }}
                    </div>

                    <form (ngSubmit)="saveClient()" #clientForm="ngForm">
                        <div class="row g-3">
                            <!-- Informations Personnelles -->
                            <div class="col-12">
                                <h6 class="text-muted border-bottom pb-2 mb-3">Informations Générales</h6>
                            </div>
                            
                            <div class="col-md-6">
                                <label class="form-label required">Nom</label>
                                <input type="text" class="form-control" [(ngModel)]="client.nom" name="nom" required 
                                       [class.is-invalid]="clientForm.submitted && !client.nom" placeholder="Nom du client">
                                <div class="invalid-feedback">Le nom est requis.</div>
                            </div>
                            
                            <div class="col-md-6">
                                <label class="form-label required">Prénom</label>
                                <input type="text" class="form-control" [(ngModel)]="client.prenom" name="prenom" required 
                                       [class.is-invalid]="clientForm.submitted && !client.prenom" placeholder="Prénom du client">
                                <div class="invalid-feedback">Le prénom est requis.</div>
                            </div>

                            <!-- Coordonnées -->
                            <div class="col-12 mt-4">
                                <h6 class="text-muted border-bottom pb-2 mb-3">Coordonnées</h6>
                            </div>

                            <div class="col-md-6">
                                <label class="form-label">Email</label>
                                <div class="input-group">
                                    <span class="input-group-text bg-light"><i class="fas fa-envelope text-muted"></i></span>
                                    <input type="email" class="form-control" [(ngModel)]="client.email" name="email" placeholder="client@exemple.com">
                                </div>
                            </div>

                            <div class="col-md-6">
                                <label class="form-label">Téléphone</label>
                                <div class="input-group">
                                    <span class="input-group-text bg-light"><i class="fas fa-phone text-muted"></i></span>
                                    <input type="tel" class="form-control" [(ngModel)]="client.telephone" name="telephone" placeholder="06XXXXXXXX">
                                </div>
                            </div>

                            <div class="col-12">
                                <label class="form-label">Adresse</label>
                                <textarea class="form-control" [(ngModel)]="client.adresse" name="adresse" rows="3" placeholder="Adresse complète..."></textarea>
                            </div>

                            <!-- Identifiants Fiscaux -->
                            <div class="col-12 mt-4">
                                <h6 class="text-muted border-bottom pb-2 mb-3">Identifiants Fiscaux</h6>
                            </div>

                            <div class="col-md-4">
                                <label class="form-label">ICE</label>
                                <input type="text" class="form-control" [(ngModel)]="client.ice" name="ice" placeholder="Identifiant Commun">
                            </div>

                            <div class="col-md-4">
                                <label class="form-label">IF (Identifiant Fiscal)</label>
                                <input type="text" class="form-control" [(ngModel)]="client.ifClient" name="ifClient" placeholder="Identifiant Fiscal">
                            </div>

                            <div class="col-md-4">
                                <label class="form-label">RC (Registre Commerce)</label>
                                <input type="text" class="form-control" [(ngModel)]="client.rc" name="rc" placeholder="N° RC">
                            </div>
                        </div>

                        <div class="d-flex justify-content-end gap-2 mt-5">
                            <button type="button" class="btn btn-light border" (click)="cancel()">
                                Annuler
                            </button>
                            <button type="submit" class="btn btn-primary" [disabled]="loading">
                                <span *ngIf="loading" class="spinner-border spinner-border-sm me-2" role="status" aria-hidden="true"></span>
                                <i class="fas fa-save me-2" *ngIf="!loading"></i>
                                {{ isEditMode ? 'Mettre à jour' : 'Enregistrer' }}
                            </button>
                        </div>
                    </form>
                </div>
            </div>
        </div>
    </div>
</div>
